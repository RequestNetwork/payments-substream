# Production Docker Compose for Easypanel
# Uses Easypanel's built-in PostgreSQL service for cross-app database access

services:
  sink:
    build:
      context: .
      dockerfile: Dockerfile.sink
    container_name: tron-payments-sink
    restart: unless-stopped
    environment:
      # Database connection - set the full DSN directly in Easypanel
      # Format: psql://user:password@host:port/database?sslmode=disable
      DSN: ${DSN}
      # Streamingfast authentication
      SUBSTREAMS_API_TOKEN: ${SUBSTREAMS_API_TOKEN}
      # TRON mainnet endpoint
      SUBSTREAMS_ENDPOINTS_CONFIG_TRON: mainnet.tron.streamingfast.io:443
